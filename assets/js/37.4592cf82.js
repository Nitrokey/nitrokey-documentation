(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{290:function(e,t,n){"use strict";n.r(t);var r=n(28),o=Object(r.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"s-mime-email-encryption"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#s-mime-email-encryption"}},[e._v("#")]),e._v(" S/MIME Email Encryption")]),e._v(" "),n("h2",{attrs:{id:"prerequisites"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),n("p",[e._v("There are two widely used standards for email encryption.")]),e._v(" "),n("ul",[n("li",[e._v("OpenPGP/GnuPG is popular among individuals,")]),e._v(" "),n("li",[e._v("S/MIME/X.509 is mostly used by enterprises.")])]),e._v(" "),n("p",[e._v("If you are in doubt which one to choose, you should use OpenPGP, see "),n("a",{attrs:{href:"https://www.nitrokey.com/documentation/openpgp-email-encryption",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),n("OutboundLink")],1),e._v(". This page describes the usage of S/MIME email encryption.")]),e._v(" "),n("p",[e._v("You need to purchase a S/MIME certificate or may already got one by your company. Furthermore, you need to install "),n("a",{attrs:{href:"https://github.com/OpenSC/OpenSC/wiki",target:"_blank",rel:"noopener noreferrer"}},[e._v("OpenSC"),n("OutboundLink")],1),e._v(" on your System. While GNU/Linux users usually can install OpenSC over the package manager (e.g. "),n("code",[e._v("sudo apt install opensc")]),e._v(" on Ubuntu), macOS and Windows users can download the installation files from the "),n("a",{attrs:{href:"https://github.com/OpenSC/OpenSC/wiki",target:"_blank",rel:"noopener noreferrer"}},[e._v("OpenSC"),n("OutboundLink")],1),e._v(" page.")]),e._v(" "),n("p",[n("strong",[e._v("Note: Windows users with 64-bit system (standard) need to install both, the 32-bit and the 64-bit version of OpenSC!")])]),e._v(" "),n("h2",{attrs:{id:"import-existing-key-and-certificate"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#import-existing-key-and-certificate"}},[e._v("#")]),e._v(" Import Existing Key and Certificate")]),e._v(" "),n("p",[e._v("The following instructions are based on the "),n("a",{attrs:{href:"https://github.com/OpenSC/OpenSC/wiki/OpenPGP-card",target:"_blank",rel:"noopener noreferrer"}},[e._v("wiki of OpenSC"),n("OutboundLink")],1),e._v(". We will assume, that you already got a key-certificate pair as a .p12  file. Please have a look at the wiki page, if you got a separate key and certificate file.")]),e._v(" "),n("p",[e._v("To open the Windows command line please push the Windows-key and  R-key. Now type 'cmd.exe' in the text field and hit enter. To open a  Terminal on macOS or GNU/Linux please use the application search (e.g.  spotlight on macOS).")]),e._v(" "),n("p",[e._v("To make these commands as simple as possible, the .p12 file needs to  be in your home folder. On Windows this is usually  'C:\\Users\\yourusername' and on macOS and GNU/Linux system it will be  '/home/yourusername'. If you do not store the .p12 file there, you have  to adapt the path in the commands below. Please plug in the Nitrokey  before submitting the commands.")]),e._v(" "),n("p",[e._v("Assuming that your key-certificate file reads 'myprivate.p12' the commands for Windows looks like this:")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('"C:\\Program Files\\OpenSC Project\\OpenSC\\tools\\pkcs15-init" --delete-objects privkey,pubkey --id 3 --store-private-key myprivate.p12 --format pkcs12 --auth-id 3 --verify-pin\n"C:\\Program Files\\OpenSC Project\\OpenSC\\tools\\pkcs15-init" --delete-objects privkey,pubkey --id 2 --store-private-key myprivate.p12 --format pkcs12 --auth-id 3 --verify-pin\n')])])]),n("p",[e._v("and on macOS and GNU/Linux it will be")]),e._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ pkcs15-init --delete-objects privkey,pubkey --id 3 --store-private-key myprivate.p12 --format pkcs12 --auth-id 3 --verify-pin\n$ pkcs15-init --delete-objects privkey,pubkey --id 2 --store-private-key myprivate.p12 --format pkcs12 --auth-id 3 --verify-pin\n")])])]),n("p",[e._v("The two commands copy the key-certificate pair to the slot 2 (needed  for decrypting emails) and slot 3 (needed for signing). The output looks on both systems something like this:")]),e._v(" "),n("p",[n("img",{attrs:{src:"https://www.nitrokey.com/sites/default/files/pictures/OpenSC-SMIME-output.png",alt:"img"}})]),e._v(" "),n("p",[e._v("Please note that there will be error messages that can be safely ignored (see output example above).\nYou now have the key-certificate pair loaded on the Nitrokey.")]),e._v(" "),n("h2",{attrs:{id:"usage"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#usage"}},[e._v("#")]),e._v(" Usage")]),e._v(" "),n("p",[e._v("You can find further information about the usage on these pages:")]),e._v(" "),n("ul",[n("li",[e._v("for using "),n("a",{attrs:{href:"https://www.nitrokey.com/documentation/smime-thunderbird",target:"_blank",rel:"noopener noreferrer"}},[e._v("S/MIME encryption on Thunderbird"),n("OutboundLink")],1)]),e._v(" "),n("li",[e._v("for using "),n("a",{attrs:{href:"https://www.nitrokey.com/documentation/smime-outlook",target:"_blank",rel:"noopener noreferrer"}},[e._v("S/MIME encryption on Outlook"),n("OutboundLink")],1)]),e._v(" "),n("li",[e._v("for using "),n("a",{attrs:{href:"https://help.gnome.org/users/evolution/stable/mail-encryption.html.en",target:"_blank",rel:"noopener noreferrer"}},[e._v("Evolution"),n("OutboundLink")],1),e._v(", an email client for the Gnome Desktop on Linux systems")])]),e._v(" "),n("h2",{attrs:{id:"troubleshooting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),n("ul",[n("li",[e._v("On Windows: Did you install "),n("strong",[e._v("both")]),e._v(", the 32-bit and the 64-bit version of OpenSC?")]),e._v(" "),n("li",[e._v("Nitrokey Storage 2: You need to install OpenSC in version 0.18 or higher. You can find the files on the "),n("a",{attrs:{href:"https://github.com/OpenSC/OpenSC/releases",target:"_blank",rel:"noopener noreferrer"}},[e._v("OpenSC website"),n("OutboundLink")],1),e._v(" for Windows and macOS user or "),n("a",{attrs:{href:"https://github.com/Nitrokey/opensc-build",target:"_blank",rel:"noopener noreferrer"}},[e._v("here"),n("OutboundLink")],1),e._v(" for Debian/Ubuntu users.")])])])}),[],!1,null,null,null);t.default=o.exports}}]);